{% extends 'home/base.html' %}
{% load static %}

{% block title %} Operations-Food Inventory {% endblock title %}

{% block style %}


<link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/sidebars/">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round|Open+Sans">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

<link href="{% static  'css/compiled-4.19.2.min.css' %}" rel="stylesheet">

<link href="{% static 'css/food_inventory.css' %}" rel="stylesheet">

{% endblock style %}

{% block navbar_content %}

<ul class="nav nav-pills flex-column mb-auto">
  <li class="nav-item">
    <a href="{% url 'home:home_view' %}" class="nav-link text-white" aria-current="page">
      <svg class="bi me-2" width="16" height="16">
        <use xlink:href="#home" />
      </svg>
      Home
    </a>
  </li>
  <li>
    <a href="#" class="nav-link text-white active">
      <svg class="bi me-2" width="16" height="16">
        <use xlink:href="#table" />
      </svg>
      Operations
    </a>
  </li>
  <li>
    <a href="#" class="nav-link text-white">
      <svg class="bi me-2" width="16" height="16">
        <use xlink:href="#grid" />
      </svg>
      Daily Stuff
    </a>
  </li>
  <li>
    <a href="#" class="nav-link text-white">
      <svg class="bi me-2" width="16" height="16">
        <use xlink:href="#people-circle" />
      </svg>
      Logout
    </a>
  </li>
</ul>

{% endblock navbar_content %}

{% block content %}

<div class="container-lg">
  <div class="table-responsive">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row">
          <div class="col-sm-8">
            <h1><b>Food Inventory</b></h1>
          </div>
          <div class="col-sm-4">
            <button type="button" class="add-new button5" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
              +</button>
          </div>


          <form method="POST" action="{% url 'operations:addProducts' %}" id="foodForm">
            {% csrf_token %}
            <!-- Modal -->
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
              aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Add New Item</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>

                  <div class="modal-body">
                    <div class="row g-3">
                      <!-- <div class="col-sm" style="text-align: left; font-size: 12px;">
                        <label for="inlineFormSelectPref" class="font-weight-bold" style="margin-bottom: 2px;">Type:</label>
                        <select name="type" class="form-select" id="inlineFormSelectPref">
                          <option value="Snacks" selected>Snacks</option>
                          <option value="Beverages">Beverages</option>
                          <option value="Others">Others</option>
                        </select>
                      </div>
                      <div class="col-sm" style="text-align: left; font-size: 12px;">
                        <label for="product" class="font-weight-bold" style="margin-bottom: 2px;">Product Name:</label>
                        <input name="product" type="text" class="form-control" id="product" placeholder="Product Name" aria-label="Product Name">
                      </div>
                      <div class="col-sm" style="text-align: left; font-size: 12px;">
                        <label for="quantity" class="font-weight-bold" style="margin-bottom: 2px;">Quantity:</label>
                        <input name="quantity" type="text" class="form-control" id="quantity" placeholder="Quantity" aria-label="Quantity">
                      </div>
                      <div class="col-sm" style="text-align: left; font-size: 12px;">
                        <label for="price" class="font-weight-bold" style="margin-bottom: 2px;">Price:</label>
                        <input name="price" type="text" class="form-control" id="price" placeholder="Price" aria-label="Price">
                      </div>
                      <div class="col-sm" style="text-align: left; font-size: 12px;">
                        <label for="last_order" class="font-weight-bold" style="margin-bottom: 2px;">Last Order Date:</label>
                        <input name="last_order_date" type="date" class="form-control" id="last_order" placeholder="Last Order Date" aria-label="Last Order Date">
                      </div>
                      <div class="col-sm" style="text-align: left; font-size: 12px;">
                        <label for="expected_order" class="font-weight-bold" style="margin-bottom: 2px;">Expected Order Date:</label>
                        <input name="expected_order_date" type="date" class="form-control" id="expected_order" placeholder="Expected Order Date"
                          aria-label="Expected Order Date">
                      </div> -->
                      {% for field in addProductsForm %}
                      <div class="col-sm" style="text-align: left; font-size: 12px;">
                        <b>{{ field.label }}</b>
                        {{ field }}
                      </div>
                      {% endfor %}

                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <input type="submit" value="Add" class="btn btn-primary">
                  </div>

                </div>
              </div>
            </div>

          </form>



          <form method="POST" id="editForm">
            {% csrf_token %}

            <div class="modal fade" id="editModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
              aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Update Item</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>

                  <div class="modal-body">
                    <div class="row g-3">
                      {% for field in addProductsForm %}
                      <div class="col-sm" style="text-align: left; font-size: 12px;">
                        <b>{{ field.label }}</b>
                        {{ field }}
                      </div>
                      {% endfor %}

                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <input type="submit" value="Update" class="btn btn-primary">
                  </div>

                </div>
              </div>
            </div>

          </form>


          <!-- Button trigger modal -->
          <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
            Launch demo modal
          </button> -->
          <form method="POST" id="deleteForm">
            {% csrf_token %}
            <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel"
              aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content"
                  style="width: 400px; margin-top: auto;justify-content: center;  margin-left: auto; ">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    Are you sure you want to delete this product?
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Delete</button>
                  </div>
                </div>
              </div>
            </div>
          </form>

        </div>
      </div>


      {% regroup products|dictsort:'type' by type as product_list %}

      <div class="tab">
        <button class="tablinks" onclick="openCity(event, 'Snacks')">Snacks</button>
        <button class="tablinks" onclick="openCity(event, 'Beverages')">Beverages</button>
        <button class="tablinks" onclick="openCity(event, 'Others')">Others</button>
      </div>

      {% for product_type in product_list %}

      <div class="tabcontent table table-hover" id={{ product_type.grouper }}>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Product name</th>
              <th>Quantity</th>
              <th>Price</th>
              <th>Last Order Date</th>
              <th>Expected Order Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>

            {% for rows in product_type.list %}
            <tr>
              <td class="name">{{ rows.product }}</td>
              <td class="name">{{ rows.quantity }}</td>
              <td class="name">{{ rows.price }}</td>
              <td class="last-date">{{ rows.last_order_date }}</td>
              <td class="last-date">{{ rows.expected_order_date }}</td>
              <td>
                <!-- <a class="add" title="Add"><i class="material-icons">&#xE03B;</i></a> -->
                <a id='edit/{{ rows.id }}' onclick=editfunction(this) data-bs-toggle="modal" data-bs-target="#editModal"
                  title="Edit"><i class="material-icons">&#xE254;</i></a>
                <a id='delete/{{ rows.id }}' onclick=deletefunction(this) data-bs-toggle="modal"
                  data-bs-target="#deleteModal" title="Delete"><i class="material-icons">&#xE872;</i></a>
              </td>
            </tr>




            {% endfor %}

          </tbody>
        </table>
      </div>

      {% endfor %}

    </div>
  </div>
</div>














{% endblock content %}


{% block addextra %}

<!-- <script src="../assets/dist/js/bootstrap.bundle.min.js"></script> -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="{% static 'js/food_inventory.js' %}"></script>

{% endblock addextra %}